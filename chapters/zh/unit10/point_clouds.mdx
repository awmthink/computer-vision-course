# 引言

## 什么是点云？

点云是一组独立的点，每个点代表三维空间中一个表面的采样，由 \[x, y, z\] 坐标表示。除了空间坐标外，这些点通常还携带其他属性，如法线、RGB 颜色、反照率和双向反射分布函数 (BRDF)。

这里的反照率是指表面反射光的多少，它实际上是反射光与入射光的比率。简单来说，它描述了入射光中有多少被反射回去。高反照率表示一个反射光较多的表面，例如雪，而低反照率表面（如沥青）则吸收更多的光。

BRDF 是一个描述光在不透明表面上如何散射或反射的函数。它详细说明了在表面某一点，光在入射方向和出射方向之间的反射方式。它为表面的反射特性提供了数学描述，包括光泽度、粗糙度和不同角度上反射光的分布。
这些属性在建模、渲染和场景理解等各种应用中起着关键作用。

尽管点云数据的概念并不新鲜，并且在图形学和物理仿真等领域已经被使用多年，但其重要性因两个关键趋势而显著上升。
首先，成本低廉且用户友好的点云采集设备的普及大大提高了获取的可及性。

增强现实和自动驾驶等技术进一步强调了点云在当今技术环境中的相关性。

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/hf-vision/course-assets/resolve/main/point_cloud_example.jpeg" alt="An Example of Point Clouds in Action">
<p>图1：An Example of Point Clouds in Action</p>
</div>

**既然我们知道了什么是点云，那么我们可以用它做什么？**

3D 点数据主要用于自动驾驶功能，但现在其他使用计算机视觉的 AI 模型，如无人机和机器人，也在使用 LiDAR 以增强视觉感知。LiDAR 是一种远程感知过程，通过收集测量值来创建物体和环境的 3D 模型和地图。使用紫外、可见光或近红外光，LiDAR 通过测量信号从物体反射回来所需的时间来评估空间关系和形状。

## 生成和数据表示

我们将使用 Python 库 [point-cloud-utils](https://github.com/fwilliams/point-cloud-utils) 和 [open-3d](https://github.com/isl-org/Open3D)，可以通过以下命令安装：

```bash
pip install point-cloud-utils
```

我们还将使用 Python 库 open-3d，可以通过以下命令安装：

```bash
pip install open3d
```

或者安装仅限 CPU 的小型版本：

```bash
pip install open3d-cpu
```

现在，我们首先需要理解这些点云存储的格式，为此我们需要研究网格云。

**为什么？**

- `point-cloud-utils` 支持读取常见的网格格式（PLY、STL、OFF、OBJ、3DS、VRML 2.0、X3D、COLLADA）。
- 如果可以导入到 [MeshLab](https://github.com/cnr-isti-vclab/meshlab)，我们就可以读取它！（来源自其 readme）

文件类型通过其扩展名来推断。以下是支持的扩展名之一：

** PLY（多边形文件格式）**

- 简单的 PLY 对象由用于表示对象的元素集合组成。它包括顶点的 (x,y,z) 三元组列表和面列表，这些面实际上是顶点列表中的索引。
- 顶点和面是元素的两个示例，PLY 文件的大部分由这两个元素组成。
- 新属性也可以被创建并附加到对象的元素上，但这些属性应以不影响旧程序的方式添加。

** STL（标准镶嵌语言）**

- 该格式用三角形近似固体模型的表面。
- 这些三角形也称为面，每个面由一个垂直方向和三个表示三角形顶点的点描述。
- 然而，这些文件没有颜色和纹理的描述。

** OFF（对象文件格式）**

- 对象文件格式（.OFF 文件）用于通过指定模型表面的多边形来表示模型的几何形状。多边形可以具有任意数量的顶点。
- 它支持用于交换的 ASCII 文本版本和用于高效读取和写入的二进制版本。
- 也被称为 .obj 格式。

** 3DS（3D Studio）**

- .3ds 扩展名的文件表示 Autodesk 3D Studio 使用的 3D Studio 网格文件格式。
- 3DS 格式使用二进制文件结构，使文件大小比基于文本的格式更小且读取速度更快，数据在文件内以块的形式组织。
- 这些块存储了代表三维场景的形状、光照和视角信息。

** X3D（可扩展 3D 图形）**

- X3D 是一种基于 XML 的 3D 图形文件格式，用于 3D 信息的展示。它是一个模块化标准，通过多个 ISO 规范定义。
- 该格式支持矢量和光栅图形、透明效果、照明效果以及包括旋转、淡出和摆动在内的动画设置。
- X3D 的优势在于它可以编码颜色信息（与 STL 不同），这些颜色在彩色 3D 打印模型时使用。

** DAE（数字资产交换）**

- 这是一个开放标准 XML 架构的 XML 架构，DAE 文件基于此架构构建。
- 该文件格式基于 COLLADA（协作设计活动）XML 架构，是用于在图形软件应用程序之间交换数字资产的开放标准 XML 架构。
- 该格式的最大优点是其跨平台兼容性。
- COLLADA 文件不受限于某个程序或制造商，而是提供了一种标准方式来存储 3D 资产。